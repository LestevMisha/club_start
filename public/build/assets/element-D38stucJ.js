(()=>{const c=getElement("#js-save-card-credentials-form"),l=getElement("referral-link").getAttribute("data-recaptcha-key");c.addEventListener("submit",async function(o){var n,d;o.preventDefault();const i=`${window.location.origin}/post/components/referral-link/saveCardCredentials`,r="application/x-www-form-urlencoded",t=getElement("#js-save-card-credentials-loader"),s={"card-number":getElement("#js-card-number-input").value.replace(/\s/g,"")},a=await reCAPTCHA(l,r,t);if(!(a!=null&&a.success))return handleFieldError("card-number",(n=a.errors)==null?void 0:n.endpoint);const e=await postRequest(i,r,s,t);handleFieldError("card-number",(d=e.errors)==null?void 0:d["card-number"]),e!=null&&e.reload&&window.location.reload(),e!=null&&e.availableIn&&updateCountdown(parseInt(e==null?void 0:e.availableIn),"card-number","save-card-credentials")})})();
