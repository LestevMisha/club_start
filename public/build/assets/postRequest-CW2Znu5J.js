function a(){var t;const r=(t=document.querySelector("meta[name='csrf-token']"))==null?void 0:t.content;if(!r)throw console.error("CSRF token not found in meta tags."),new Error("CSRF token is missing.");return r}async function i(r,t,n={}){try{const o=t==="application/json"?JSON.stringify(n):new URLSearchParams(n),e=await fetch(r,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":a(),"Content-Type":t},body:o});if(e.redirected){if(e.status===303){const s=e.headers.get("X-Redirect-URL");if(s)return window.location.replace(s)}return window.location.replace(e.url)}if(!e.ok)throw new Error(`${e.status}: ${e.statusText}`);return await e.json()}catch(o){throw console.error("Request failed:",o),o}}export{i as p};
