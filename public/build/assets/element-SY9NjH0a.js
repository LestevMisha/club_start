import{v as f}from"./verifyRecaptcha-DmfFc_Y8.js";import{p as b}from"./postRequest-CW2Znu5J.js";import{i as y}from"./injectContentStylesAndScripts-Hbh6Pqhu.js";import{r as p}from"./renderValidationErrors-Bt-wEaES.js";import{r as v}from"./renderBlockTime-CAqihYew.js";document.querySelectorAll("xcard-credentials-form").forEach(o=>{if(o.getAttribute("data-js-initialized")!=="false")return;o.setAttribute("data-js-initialized",!0);const e=o.querySelector("form"),a=o.querySelector("xloader"),s=e.querySelector("xcredit-card-input[data-attribute='card-number']"),d=e.querySelector("#js-card-number-button");e.addEventListener("submit",async l=>{var n,i,c;l.preventDefault(),a.classList.add("active");try{const t=await f();if(!(t!=null&&t.success))return y(document.body,(n=t==null?void 0:t.backend)==null?void 0:n.message);const m=new FormData(e),u=`${window.location.origin}/post/components/card-credentials-form/saveCardCredentials`,r=await b(u,"application/x-www-form-urlencoded",m);p(e,(i=r==null?void 0:r.backend)==null?void 0:i.errors),v(s,d,(c=r==null?void 0:r.backend)==null?void 0:c.availableIn)}catch(t){console.error("Form submission error:",t)}finally{a.classList.remove("active")}})});
